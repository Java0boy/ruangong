<template>
  <div class="postbody">
    <div class="side-bar">
      <div class="header">
<!--        <a href="index.html" class="logo">BLOG</a>-->
        <div class="intro">软工小学期.第一轮迭代~~~</div>
      </div>
      <div class="nav">
        <a href="#" class="item">关于我们</a>
        <a href="#" class="item">联系我们</a>
        <a href="#" class="item">赞助我们</a>
      </div>
    </div>
    <div class="main">
      <!--      //搜索失败-->
      <div class="article" style="text-align: center;padding: 20px 30px" v-if="blogList.length == 0 && userList.length == 0">
        <div>
          <img src="../assets/logo-large-found.png" width=200>
        </div>
        <div style="color:#3e606b;font-size: 35px;margin-top: 20px;font-style: italic;font-weight: bold">No search results</div>
        <div style="color:#3e606b;margin-top: 20px;letter-spacing: 3px;color: #66686e">没有找到{{this.$route.params.keyword}}相关的搜索结果</div>
      </div>
      <!--      //-->
      <div v-for="blog in blogList" class="article-list">
        <div class="item">
          <div style="height: 5px;width: 100%;background: #6aa0b2"></div>
          <a><div class="posttitle" @click="gotoBlog(blog.username, blog.id)">{{blog.title}}</div></a>

          <div class="status">发布于： {{blog.date}}| 作者：{{blog.username}}</div>

          <div style="height: 10px;width: 100%"></div>
        </div>
      </div>

      <div v-for="user in userList" class="article-list">
        <div class="item">
          <div style="height: 5px;width: 100%;background: #6aa0b2"></div>
          <a><div class="posttitle" @click="gotoUser(user.userName)">{{user.userName}}</div></a>

          <div class="status">性别： {{user.sex}}| 年龄：{{user.age}}</div>

          <div style="height: 10px;width: 100%"></div>
        </div>
      </div>

    </div>
  </div>

</template>

<script>
    export default {
        data(){
            return {
                blogList: [],
                userList: [],
            }
        },

        methods: {
            gotoBlog(uname, addr)
            {
                this.$router.push({name: 'SingleBlog', params:{username: uname, blogId: addr}});
            },
            gotoUser(uname)
            {
                this.$router.push({name: 'UserPage', params: {username: uname}});
            },

            getUserList(keyword)
            {
                this.$axios({
                    url: '/rest/searchUser',//请求的地址
                    method: 'post',//请求的方式
                    data: {
                        userName: keyword,  password: ''

                    },//请求的表单数据
                }).then(res => {
                    if (res.data != null)
                    {
                        this.userList = res.data;
                    }
                });
            },

            getBlogList(keyword)
            {
                this.$axios({
                    url: '/rest/getBlogByBlog',//请求的地址
                    method: 'post',//请求的方式
                    data: {
                        title: keyword,
                        username: '',
                        date: '',
                        blogMd: '',
                        blogHtml: '',
                        id: '',
                    },//请求的表单数据
                }).then(res => {
                    if (res.data != null)
                    {
                        this.blogList = res.data;
                    }
                });
            }

        },
        created() {
            if (this.$route.params.type == 'blog')
            {
                this.getBlogList(this.$route.params.keyword);
            }
            else
            {
                this.getUserList(this.$route.params.keyword);
            }

        }

    }
</script>

<style scoped>
  .posttitle{
    font-size: 30px;
    font-family: "Yu Gothic UI";
    color: #0C1021;
  }
  .status{
    font-family: "Yu Gothic UI";
  }
  .postbody {
    background: #f1f1f1;
    /*line-height: 1.7;*/
    height: 100%;
    width: 100%;
  }

  a {
    text-decoration: none;
  }

  a, body {
    color: #9fc6dc;
  }

  .side-bar {
    float: left;
    width: 20%;
    position: fixed;
  }

  .side-bar > * {
    padding: 10px 15px;
  }

  .side-bar .nav a,
  .side-bar .tag-list a {
    display: block;
    padding: 5px;
    color: #888;
    -webkit-transition: color 200ms;
    -o-transition: color 200ms;
    transition: color 200ms;
  }

  .side-bar .nav a:hover,
  .side-bar .tag-list a:hover {
    color: #9fc6dc;
  }

  .side-bar .nav a {
    font-weight: 700;
  }

  .main {
    float: right;
    width: 80%;
    color: #454545;
  }

  .header .logo {
    line-height: 1;
    border: 5px solid #eee;
    padding: 10px 20px;
    font-size: 30px;
    display: inline-block;
    margin-bottom: 10px;
  }
/*//框的样式*/
  .article-list, .article {
    margin-right: 30%;
    margin-bottom: 25px;
    margin-top: 20px;
    background: #fff;
    /*padding: 20px 30px;*/
    transition: height 5s ease;
    -webkit-box-shadow: 0 0 10px 0px rgba(0,0,0,.1);
    /*box-shadow: 0 0 3px 2px rgba(0,0,0,.2);*/
  }

  .article-list .item  {
    margin-bottom: 25px;
  }

  .article-list .item .title,
  .article .title {
    color: #454545;
    font-size: 22px;
    font-weight: 700;
  }

  .article-list .item .status,
  .article .status {
    font-size: 13px;
    color: #ccc;
  }

  .article-list .item > *,
  .article > * {
    margin: 10px 0;
  }
  .content{

  }


</style>
